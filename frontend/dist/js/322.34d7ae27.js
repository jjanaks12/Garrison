"use strict";(self["webpackChunkrolenpermissionf"]=self["webpackChunkrolenpermissionf"]||[]).push([[322],{5810:function(t,e,s){var i=s(2482),r=s(9203),o=function(t,e,s,i){var r,o=arguments.length,n=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(n=(o<3?r(n):o>3?r(e,s,n):r(e,s))||n);return o>3&&n&&Object.defineProperty(e,s,n),n};let n=class extends r.w3{constructor(...t){super(...t),(0,i.Z)(this,"isFocus",!1),(0,i.Z)(this,"hasText",!1),(0,i.Z)(this,"title",void 0),(0,i.Z)(this,"disabled",void 0)}render(){const t=arguments[0];return t("div",{class:{form__group:!0,"has--text":this.isFocus||this.hasText}},[this.title?t("label",{attrs:{for:""}},[this.title]):null,this.$slots.default])}mounted(){const t=this.$el.querySelector("input");t&&(this.$nextTick((()=>{this.hasText=""!==t.value})),t.addEventListener("focus",(()=>{this.isFocus=!0})),t.addEventListener("blur",(()=>{this.isFocus=!1})),t.addEventListener("input",(()=>{this.hasText=t.value.length>0})),this.disabled&&t.setAttribute("disabled",""))}};o([(0,r.fI)({default:""})],n.prototype,"title",void 0),o([(0,r.fI)({default:!1})],n.prototype,"disabled",void 0),n=o([r.wA],n),e["Z"]=n},3958:function(t,e,s){var i=s(8701),r=s.n(i),o=s(2482),n=s(9203),a=s(5810),l=function(t,e,s,i){var r,o=arguments.length,n=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(n=(o<3?r(n):o>3?r(e,s,n):r(e,s))||n);return o>3&&n&&Object.defineProperty(e,s,n),n};let c,h=class extends n.w3{constructor(...t){super(...t),(0,o.Z)(this,"searchText","")}searchTextChanged(){c&&clearTimeout(c),c=setTimeout((()=>{this.submitHandler()}),300)}render(){const t=arguments[0];return t("form",{attrs:{action:"#",method:"POST"},class:"form form__inline p4 text--center",on:{submit:this.submitHandler}},[t(a.Z,[t("input",r()([{on:{input:t=>{t.target.composing||(this.searchText=t.target.value)}},attrs:{type:"search",name:"search_permission",id:"spf_search",placeholder:"Search text here..."},domProps:{value:this.searchText}},{directives:[{name:"model",value:this.searchText,modifiers:{}}]}]))]),t("div",{class:"form__action"},[t("button",{attrs:{type:"submit"},class:"btn btn__primary"},[t("span",{class:"material-icons"},["search"])])])])}submitHandler(t){t&&t.preventDefault(),this.$emit("search",this.searchText)}};l([(0,n.RL)("searchText")],h.prototype,"searchTextChanged",null),h=l([n.wA],h),e["Z"]=h},7682:function(t,e,s){var i=s(2482),r=s(9203),o=function(t,e,s,i){var r,o=arguments.length,n=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(n=(o<3?r(n):o>3?r(e,s,n):r(e,s))||n);return o>3&&n&&Object.defineProperty(e,s,n),n};let n=class extends r.w3{constructor(...t){super(...t),(0,i.Z)(this,"current",void 0),(0,i.Z)(this,"total",void 0),(0,i.Z)(this,"max",void 0)}get pages(){let t=this.max;t>this.total&&(t=this.total);let e=this.current-Math.floor(t/2);return e=Math.max(e,1),e=Math.min(e,1+this.total-t),Array.from({length:t},((t,s)=>e+s))}render(){const t=arguments[0];return t("nav",{class:"pagination"},[this.total>1?[t("ul",{class:"pagination__list"},[this.current>1?t("li",[t("a",{attrs:{href:"#"},class:"pagination--btn prev",on:{click:this.prev}},["prev"])]):null,this.pages.map((e=>t("li",[e===this.current?t("strong",[e]):t("a",{attrs:{href:"#"},on:{click:t=>{t.preventDefault(),this.goto(e)}}},[e])]))),this.current<this.total?t("li",[t("a",{attrs:{href:"#"},class:"pagination--btn next",on:{click:this.next}},["next"])]):null])]:null])}next(t){t.preventDefault(),this.$emit("next")}prev(t){t.preventDefault(),this.$emit("prev")}goto(t){this.$emit("goto",t)}};o([(0,r.fI)({required:!0})],n.prototype,"current",void 0),o([(0,r.fI)({required:!0})],n.prototype,"total",void 0),o([(0,r.fI)({default:3})],n.prototype,"max",void 0),n=o([r.wA],n),e["Z"]=n},6322:function(t,e,s){s.r(e),s.d(e,{default:function(){return O}});var i=s(2482),r=s(9203),o=s(3822),n=s(8701),a=s.n(n),l=s(5810);class c{constructor(){(0,i.Z)(this,"id",""),(0,i.Z)(this,"title",""),(0,i.Z)(this,"priority",0),(0,i.Z)(this,"created_at",""),(0,i.Z)(this,"updated_at",""),(0,i.Z)(this,"deleted_at",""),(0,i.Z)(this,"permissions",[]),c.INSTANCE++}checkPriority(t){return t.priority>this.priority}}(0,i.Z)(c,"INSTANCE",0);var h=function(t,e,s,i){var r,o=arguments.length,n=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(n=(o<3?r(n):o>3?r(e,s,n):r(e,s))||n);return o>3&&n&&Object.defineProperty(e,s,n),n};let d=class extends r.w3{constructor(...t){super(...t),(0,i.Z)(this,"toggleModal",void 0),(0,i.Z)(this,"save",void 0),(0,i.Z)(this,"formData",new c),(0,i.Z)(this,"detail",void 0)}onDetailChanged(){this.init()}mounted(){this.init()}render(){const t=arguments[0];return t("form",{class:"form",on:{submit:t=>{t.preventDefault(),this.save(this.formData).then((()=>{this.toggleModal(null)}))}}},[t(l.Z,{attrs:{title:"Title"}},[t("input",a()([{on:{input:t=>{t.target.composing||this.$set(this.formData,"title",t.target.value)}},attrs:{type:"text",name:"title",id:"pf_title"},domProps:{value:this.formData.title}},{directives:[{name:"model",value:this.formData.title,modifiers:{}}]}]))]),t("div",{class:"form__action"},[t("button",{attrs:{type:"submit"},class:"btn btn__primary"},["save"])])])}init(){this.detail&&(this.formData.id=this.detail.id,this.formData.title=this.detail.title)}};h([(0,r.fI)({default:null})],d.prototype,"detail",void 0),h([(0,r.RL)("detail")],d.prototype,"onDetailChanged",null),d=h([(0,r.wA)({methods:{...(0,o.nv)({toggleModal:"root/toggleModal",save:"role/save"})}})],d);var p=d,f=(s(7658),function(t,e,s,i){var r,o=arguments.length,n=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(n=(o<3?r(n):o>3?r(e,s,n):r(e,s))||n);return o>3&&n&&Object.defineProperty(e,s,n),n});let u=class extends r.w3{constructor(...t){super(...t),(0,i.Z)(this,"toggleModal",void 0),(0,i.Z)(this,"list",void 0),(0,i.Z)(this,"fetchPermission",void 0),(0,i.Z)(this,"assignPermission",void 0),(0,i.Z)(this,"permissionList",[]),(0,i.Z)(this,"searchText",""),(0,i.Z)(this,"permissions",void 0),(0,i.Z)(this,"roleId",void 0)}async mounted(){await this.fetchPermission({params:{per_page:null}}),this.permissions.length>0&&this.permissions.forEach((t=>{const e=this.list.find((e=>e.title===t));e&&e.id&&this.permissionList.push(e.id)}))}get hasChanged(){return this.permissionList.length>0||this.permissionList.length!==this.permissions.length}get filterList(){return this.list.filter((t=>t.title.toLowerCase().includes(this.searchText.toLowerCase())))}render(){const t=arguments[0];return t("form",{class:"form",on:{submit:this.formSubmit}},[t("div",{class:"form__action"},[t(l.Z,{attrs:{title:"saerch permission..."}},[t("input",a()([{on:{input:t=>{t.target.composing||(this.searchText=t.target.value)}},attrs:{type:"search"},domProps:{value:this.searchText}},{directives:[{name:"model",value:this.searchText,modifiers:{}}]}]))]),t("div",{class:"holder"},[t("button",{attrs:{type:"button"},on:{click:this.selectAll},class:"btn__link"},["select All"]),t("button",{attrs:{type:"button"},on:{click:this.deSelectAll},class:"btn__link"},["Deselect All"])])]),t("div",{class:"checkbox__list"},[this.filterList.map((e=>t("label",{class:{checkbox:!0,"checkbox--checked":this.permissionList.includes(e.id||"")}},[t("input",a()([{on:{change:t=>{const s=this.permissionList,i=t.target,r=!!i.checked;if(Array.isArray(s)){const t=e.id,r=this._i(s,t);i.checked?r<0&&(this.permissionList=s.concat([t])):r>-1&&(this.permissionList=s.slice(0,r).concat(s.slice(r+1)))}else this.permissionList=r}},attrs:{type:"checkbox",name:"permission"},domProps:{checked:Array.isArray(this.permissionList)?this._i(this.permissionList,e.id)>-1:this.permissionList}},{directives:[{name:"model",value:this.permissionList,modifiers:{}}]}])),t("span",{class:"checkbox__text"},[e.title])])))]),t("div",{class:"form__action"},[t("button",{attrs:{type:"submit",disabled:!this.hasChanged},class:"btn btn__primary"},["Save"])])])}formSubmit(t){t.preventDefault(),this.permissionList.length>0&&this.assignPermission({roleId:this.roleId,permissions:this.permissionList}).then((()=>{this.toggleModal(null)}))}selectAll(){this.permissionList=[],this.list.forEach((t=>{t.id&&this.permissionList.push(t.id)}))}deSelectAll(){this.permissionList=[]}};f([(0,r.fI)({default:()=>[]})],u.prototype,"permissions",void 0),f([(0,r.fI)({required:!0})],u.prototype,"roleId",void 0),u=f([(0,r.wA)({computed:{...(0,o.Se)({list:"permission/permissionList"})},methods:{...(0,o.nv)({toggleModal:"root/toggleModal",fetchPermission:"permission/fetch",assignPermission:"role/assignPermission"})}})],u);var m=u,g=function(t,e,s,i){var r,o=arguments.length,n=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(n=(o<3?r(n):o>3?r(e,s,n):r(e,s))||n);return o>3&&n&&Object.defineProperty(e,s,n),n};let v=class extends r.w3{constructor(...t){super(...t),(0,i.Z)(this,"toggleModal",void 0),(0,i.Z)(this,"destory",void 0),(0,i.Z)(this,"detail",void 0)}get permissions(){return this.detail.permissions?this.detail.permissions.map((t=>t.title)).join(", "):""}render(){const t=arguments[0];return t("div",{class:"item"},[t("div",{class:"item__detail"},[t("strong",[this.detail.title]),t("em",{class:"list__string"},[this.permissions])]),t("div",{class:"item__action"},[t("a",{attrs:{href:"#"},on:{click:t=>{t.preventDefault(),this.toggleModal({title:`Edit <strong>${this.detail.title}</strong>`,component:m,props:{roleId:this.detail.id,permissions:this.detail.permissions?this.detail.permissions.map((t=>t.title)):[]}})}}},[0===this.detail.permissions?.length?"Assign Permission":"Update Permission"]),t("a",{attrs:{href:"#"},on:{click:this.edit}},["edit"]),t("a",{attrs:{href:"#"},on:{click:t=>{t.preventDefault(),this.detail.id&&this.destory(this.detail.id)}}},["delete"])])])}edit(t){t.preventDefault(),this.toggleModal({title:`Edit <strong>${this.detail.title}</strong>`,component:p,props:{detail:this.detail}})}};g([(0,r.fI)({required:!0})],v.prototype,"detail",void 0),v=g([(0,r.wA)({methods:{...(0,o.nv)({toggleModal:"root/toggleModal",destory:"role/destory"})}})],v);var y=v,b=s(3958),_=function(t,e,s,i){var r,o=arguments.length,n=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(n=(o<3?r(n):o>3?r(e,s,n):r(e,s))||n);return o>3&&n&&Object.defineProperty(e,s,n),n};let x=class extends r.w3{render(){const t=arguments[0];return t("div",{class:"skeleton__loader skeleton__loader--inline"},[t("div",{class:"wrap"},[t("span",{class:"text"})]),t("div",{class:"action"},[t("span",{class:"link"}),t("span",{class:"link"})])])}};x=_([r.wA],x);var Z=x,P=s(7682),k=function(t,e,s,i){var r,o=arguments.length,n=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(n=(o<3?r(n):o>3?r(e,s,n):r(e,s))||n);return o>3&&n&&Object.defineProperty(e,s,n),n};let w=class extends r.w3{constructor(...t){super(...t),(0,i.Z)(this,"toggleModal",void 0),(0,i.Z)(this,"isLoading",void 0),(0,i.Z)(this,"list",void 0),(0,i.Z)(this,"current",void 0),(0,i.Z)(this,"lastPage",void 0),(0,i.Z)(this,"fetch",void 0),(0,i.Z)(this,"search",void 0),(0,i.Z)(this,"prevPage",void 0),(0,i.Z)(this,"nextPage",void 0),(0,i.Z)(this,"goto",void 0)}mounted(){this.fetch({params:{per_page:10}})}render(){const t=arguments[0];return t("section",{class:"card"},[t("header",{class:"card__header"},[t("h1",{class:"card__title"},["Role Page"]),t("div",{class:"card__header__action"},[t("a",{attrs:{href:"#"},on:{click:t=>{t.preventDefault(),this.fetch({params:{per_page:10}})}}},[t("span",{class:"material-icons"},["refresh"])]),t("a",{attrs:{href:"#"},on:{click:t=>{t.preventDefault(),this.toggleModal({title:"Add new Role",component:p})}}},["Add Role"])])]),t("div",{class:"card__body"},[t(b.Z,{on:{search:t=>{this.search(t)}}}),this.isLoading?t(Z):this.list.map((e=>t(y,{attrs:{detail:e},key:e.id})))]),t("footer",{class:"card__footer"},[t(P.Z,{attrs:{current:this.current,total:this.lastPage},on:{next:()=>this.nextPage(),prev:()=>this.prevPage(),goto:t=>this.goto(t)}})])])}};w=k([(0,r.wA)({computed:{...(0,o.Se)({list:"role/list",current:"role/currentPage",lastPage:"role/lastPage",isLoading:"role/isLoading"})},methods:{...(0,o.nv)({toggleModal:"root/toggleModal",fetch:"role/fetch",nextPage:"role/nextPage",prevPage:"role/prevPage",goto:"role/gotoPage",search:"role/search"})}})],w);var O=w},8701:function(t){function e(){return e=Object.assign?Object.assign.bind():function(t){for(var e,s=1;s<arguments.length;s++)for(var i in e=arguments[s],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},e.apply(this,arguments)}var s=["attrs","props","domProps"],i=["class","style","directives"],r=["on","nativeOn"],o=function(t){return t.reduce((function(t,o){for(var a in o)if(t[a])if(-1!==s.indexOf(a))t[a]=e({},t[a],o[a]);else if(-1!==i.indexOf(a)){var l=t[a]instanceof Array?t[a]:[t[a]],c=o[a]instanceof Array?o[a]:[o[a]];t[a]=[].concat(l,c)}else if(-1!==r.indexOf(a))for(var h in o[a])if(t[a][h]){var d=t[a][h]instanceof Array?t[a][h]:[t[a][h]],p=o[a][h]instanceof Array?o[a][h]:[o[a][h]];t[a][h]=[].concat(d,p)}else t[a][h]=o[a][h];else if("hook"===a)for(var f in o[a])t[a][f]=t[a][f]?n(t[a][f],o[a][f]):o[a][f];else t[a]=o[a];else t[a]=o[a];return t}),{})},n=function(t,e){return function(){t&&t.apply(this,arguments),e&&e.apply(this,arguments)}};t.exports=o}}]);
//# sourceMappingURL=322.34d7ae27.js.map